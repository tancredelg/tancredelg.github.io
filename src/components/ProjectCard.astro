---
import type { ProjectProps } from '../data/projects.ts'
import TechnologyRibbon from './TechnologyRibbon.astro'

const {
    title,
    summary,
    description,
    fromDate,
    toDate,
    categories = [],
    technologies = [],
    repoUrl,
    postUrl,
    liveUrl,
    coverMedia,
    media = [],
} = Astro.props as ProjectProps
---

<div class="project-card group/card">
    {
        media.length > 0 && coverMedia >= 0 && coverMedia < media.length && (
            <div class="absolute top-0 bottom-0 right-0 pointer-events-none z-0">
                {media[coverMedia].type === 'image' ? (
                    <img
                        src={media[coverMedia].src}
                        alt={media[coverMedia].alt ?? title}
                        class="h-full w-auto object-cover select-none pointer-events-none"
                    />
                ) : media[coverMedia].type === 'video' ? (
                    <video
                        src={media[coverMedia].src}
                        class="h-full w-auto object-cover select-none pointer-events-none"
                        autoplay
                        muted
                        loop
                        playsinline
                    />
                ) : null}

                <div
                    aria-hidden="true"
                    class="absolute inset-0 pointer-events-none rounded-r-3xl"
                    style={`background: linear-gradient(to right, oklch(13% 0.028 261.692) 0%, oklch(13% 0.028 261.692 / 0.83) 45%, transparent 100%);`}
                />
            </div>
        )
    }
    <div id="content">
        <div
            class="group-hover/card:text-white/100 text-white/85 transition-all duration-100 ease-out"
        >
            <h4 class="font-medium text-xl sm:text-3xl lg:text-2xl">{title}</h4>
            <p class="mt-0.5 sm:mt-1.5 lg:mt-0.5 sm:w-2/3 text-xs sm:text-base lg:text-sm">
                {summary}
            </p>
        </div>
        <TechnologyRibbon technologies={technologies} />
    </div>

    <div id="urls">
        {
            !repoUrl && !postUrl && !liveUrl && (
                <span
                    title="Feel free to contact me for more information"
                    class="p-1 px-2 rounded-lg bg-black/85 text-gray-300/85 text-sm
                    opacity-0 group-hover/card:opacity-100
                    transition-all duration-100 ease-out"
                >
                    No links available, sorry!
                </span>
            )
        }
        {
            repoUrl && (
                <a href={repoUrl} target="_blank" class="bg-white text-neutral-900">
                    {'Code </>'}
                </a>
            )
        }
        {
            postUrl && (
                <a href={postUrl} target="_blank" class="bg-white text-blue-800">
                    {'Post üìù'}
                </a>
            )
        }
        {
            liveUrl && (
                <a href={liveUrl} target="_blank" class="bg-white text-red-800">
                    {'Live üöÄ'}
                </a>
            )
        }
    </div>
</div>
